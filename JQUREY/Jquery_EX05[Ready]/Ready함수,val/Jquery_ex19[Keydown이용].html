<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <script>
            
            $(document).ready(function(){ // ↓함수
                var map=[
                ['★','■','■'],['■','■','■'],
                ['■','■','■']
            ]
            // 좌표 변수 생성
            var x=0; var y=0

            // 별을 그리기 시작하는 작업
                function init() {
                    var fulltext=''
                    for(var i=0; i<=2; i++) {
                        for(var j=0; j<=2; j++) {
                            fulltext+=map[i][j]
                        }
                        fulltext+="<br>"
                    }
                    $("#map-area").html(fulltext) // 시작부터 그려나간다
                }

            // 별을 움직일 수있게 하는 작업
                function refresh(){
                    $("#map-area").html('') // 지우고 다시 그린다 시작
                    var fulltext=''
                    for(var i=0; i<=2; i++) {
                        for(var j=0; j<=2; j++) {
                            fulltext+=map[i][j]
                        }
                        fulltext+="<br>"
                    }
                    $("#map-area").html(fulltext)
                }
                init()

                $(document).on("keydown",keyEventFnc)    
                // key가 눌려지면, keyEventFnc함수를 실행하겠다.
                function keyEventFnc(e){ // e, event : 발생한 이벤트 객체정보가 넘어온다.
                    // e.keyCode-이벤트 객체 내부의 키코드 값
                    switch(e.keyCode){

                        case 37: // LEFT - keyCode
                            $("#user_id").val("LEFT")
                            map[y][x]='■'
                            x--
                            // if(x-1<0) {

                            // }else {

                            // }
                            map[y][x]='★'
                            break;
                        case 38: // TOP - keyCode
                            $("#user_id").val("TOP")
                            map[y][x]='■'
                            y--
                            map[y][x]='★'
                            break;
                        case 39: // RIGHT - keyCode
                            $("#user_id").val("RIGHT")
                            map[y][x]='■'
                            x++
                            map[y][x]='★'
                            break;
                        case 40: // BOTTOM - keyCode
                            $("#user_id").val("BOTTOM")
                            map[y][x]='■'
                            y++
                            map[y][x]='★'
                            break;
                    }

                    // 2중 for문 이용하여 별을 이동하는 것처럼 보일수있게 마무리
                    refresh() // repaint 
                }
            }) 
            
        
    </script>
</head>
<body>
    <p>
        방향키 <input type="text" name="user_id" id="user_id">
    </p>
    <div id="map-area">

    </div>
</body>
</html>
